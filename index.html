<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Questionário de Atitudes</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    .question { margin-bottom: 10px; }
    .result { margin-top: 20px; font-weight: bold; }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <h2>Questionário de Atitudes</h2>
  <form id="questionnaire">
    <!-- User Name Field -->
    <div class="question">
      <label for="name">Nome:</label>
      <input type="text" name="name" id="name" placeholder="O Seu Nome">
    </div>
    
    <!-- Grupo I: Aprovação (1-5) -->
    <div class="question">
      <label>1. Receber críticas me faz sentir mal:</label><br>
      <input type="radio" name="q1" value="-2"> Totalmente de acordo<br>
      <input type="radio" name="q1" value="-1"> Moderadamente de acordo<br>
      <input type="radio" name="q1" value="0"> Dúvidas<br>
      <input type="radio" name="q1" value="1"> Moderadamente em desacordo<br>
      <input type="radio" name="q1" value="2"> Totalmente em desacordo<br>
    </div>
    <div class="question">
      <label>2. É melhor renunciar aos meus interesses para agradar aos outros:</label><br>
      <input type="radio" name="q2" value="-2"> Totalmente de acordo<br>
      <input type="radio" name="q2" value="-1"> Moderadamente de acordo<br>
      <input type="radio" name="q2" value="0"> Dúvidas<br>
      <input type="radio" name="q2" value="1"> Moderadamente em desacordo<br>
      <input type="radio" name="q2" value="2"> Totalmente em desacordo<br>
    </div>
    <div class="question">
      <label>3. Para ser feliz preciso que as outras pessoas me aprovem:</label><br>
      <input type="radio" name="q3" value="-2"> Totalmente de acordo<br>
      <input type="radio" name="q3" value="-1"> Moderadamente de acordo<br>
      <input type="radio" name="q3" value="0"> Dúvidas<br>
      <input type="radio" name="q3" value="1"> Moderadamente em desacordo<br>
      <input type="radio" name="q3" value="2"> Totalmente em desacordo<br>
    </div>
    <div class="question">
      <label>4. Se alguém importante espera que eu faça algo, devo fazê-lo:</label><br>
      <input type="radio" name="q4" value="-2"> Totalmente de acordo<br>
      <input type="radio" name="q4" value="-1"> Moderadamente de acordo<br>
      <input type="radio" name="q4" value="0"> Dúvidas<br>
      <input type="radio" name="q4" value="1"> Moderadamente em desacordo<br>
      <input type="radio" name="q4" value="2"> Totalmente em desacordo<br>
    </div>
    <div class="question">
      <label>5. Meu valor depende do que os outros pensam de mim:</label><br>
      <input type="radio" name="q5" value="-2"> Totalmente de acordo<br>
      <input type="radio" name="q5" value="-1"> Moderadamente de acordo<br>
      <input type="radio" name="q5" value="0"> Dúvidas<br>
      <input type="radio" name="q5" value="1"> Moderadamente em desacordo<br>
      <input type="radio" name="q5" value="2"> Totalmente em desacordo<br>
    </div>

<!-- Grupo II: Amor (6-10) -->
<div class="question">
  <label>6. Não posso ser feliz se não for amado por alguém:</label><br>
  <input type="radio" name="q6" value="-2"> Totalmente de acordo<br>
  <input type="radio" name="q6" value="-1"> Moderadamente de acordo<br>
  <input type="radio" name="q6" value="0"> Dúvidas<br>
  <input type="radio" name="q6" value="1"> Moderadamente em desacordo<br>
  <input type="radio" name="q6" value="2"> Totalmente em desacordo<br>
</div>
<div class="question">
  <label>7. Se há pessoas a quem não agrado, serei menos feliz:</label><br>
  <input type="radio" name="q7" value="-2"> Totalmente de acordo<br>
  <input type="radio" name="q7" value="-1"> Moderadamente de acordo<br>
  <input type="radio" name="q7" value="0"> Dúvidas<br>
  <input type="radio" name="q7" value="1"> Moderadamente em desacordo<br>
  <input type="radio" name="q7" value="2"> Totalmente em desacordo<br>
</div>
<div class="question">
  <label>8. Se as pessoas de que gosto me rejeitam, é porque estou errado em alguma coisa:</label><br>
  <input type="radio" name="q8" value="-2"> Totalmente de acordo<br>
  <input type="radio" name="q8" value="-1"> Moderadamente de acordo<br>
  <input type="radio" name="q8" value="0"> Dúvidas<br>
  <input type="radio" name="q8" value="1"> Moderadamente em desacordo<br>
  <input type="radio" name="q8" value="2"> Totalmente em desacordo<br>
</div>
<div class="question">
  <label>9. Se uma pessoa que amo não me corresponde, é porque sou pouco interessante:</label><br>
  <input type="radio" name="q9" value="-2"> Totalmente de acordo<br>
  <input type="radio" name="q9" value="-1"> Moderadamente de acordo<br>
  <input type="radio" name="q9" value="0"> Dúvidas<br>
  <input type="radio" name="q9" value="1"> Moderadamente em desacordo<br>
  <input type="radio" name="q9" value="2"> Totalmente em desacordo<br>
</div>
<div class="question">
  <label>10. O isolamento social conduz à infelicidade:</label><br>
  <input type="radio" name="q10" value="-2"> Totalmente de acordo<br>
  <input type="radio" name="q10" value="-1"> Moderadamente de acordo<br>
  <input type="radio" name="q10" value="0"> Dúvidas<br>
  <input type="radio" name="q10" value="1"> Moderadamente em desacordo<br>
  <input type="radio" name="q10" value="2"> Totalmente em desacordo<br>
</div>

    <!-- Grupo III: Realização (11-15) -->
<div class="question">
  <label>11. Para me considerar uma pessoa digna, devo destacar-me pelo menos em alguma área importante da vida:</label><br>
  <input type="radio" name="q11" value="-2"> Totalmente de acordo<br>
  <input type="radio" name="q11" value="-1"> Moderadamente de acordo<br>
  <input type="radio" name="q11" value="0"> Dúvidas<br>
  <input type="radio" name="q11" value="1"> Moderadamente em desacordo<br>
  <input type="radio" name="q11" value="2"> Totalmente em desacordo<br>
</div>
<div class="question">
  <label>12. Devo ser útil, produtivo ou criativo, senão a vida não faz sentido:</label><br>
  <input type="radio" name="q12" value="-2"> Totalmente de acordo<br>
  <input type="radio" name="q12" value="-1"> Moderadamente de acordo<br>
  <input type="radio" name="q12" value="0"> Dúvidas<br>
  <input type="radio" name="q12" value="1"> Moderadamente em desacordo<br>
  <input type="radio" name="q12" value="2"> Totalmente em desacordo<br>
</div>
<div class="question">
  <label>13. As pessoas que têm boas ideias são mais dignas do que as que não as têm:</label><br>
  <input type="radio" name="q13" value="-2"> Totalmente de acordo<br>
  <input type="radio" name="q13" value="-1"> Moderadamente de acordo<br>
  <input type="radio" name="q13" value="0"> Dúvidas<br>
  <input type="radio" name="q13" value="1"> Moderadamente em desacordo<br>
  <input type="radio" name="q13" value="2"> Totalmente em desacordo<br>
</div>
<div class="question">
  <label>14. Não fazer as coisas tão bem como os outros significa ser inferior a eles:</label><br>
  <input type="radio" name="q14" value="-2"> Totalmente de acordo<br>
  <input type="radio" name="q14" value="-1"> Moderadamente de acordo<br>
  <input type="radio" name="q14" value="0"> Dúvidas<br>
  <input type="radio" name="q14" value="1"> Moderadamente em desacordo<br>
  <input type="radio" name="q14" value="2"> Totalmente em desacordo<br>
</div>
<div class="question">
  <label>15. Se falho no meu trabalho sou um fracassado:</label><br>
  <input type="radio" name="q15" value="-2"> Totalmente de acordo<br>
  <input type="radio" name="q15" value="-1"> Moderadamente de acordo<br>
  <input type="radio" name="q15" value="0"> Dúvidas<br>
  <input type="radio" name="q15" value="1"> Moderadamente em desacordo<br>
  <input type="radio" name="q15" value="2"> Totalmente em desacordo<br>
</div>

    <!-- Grupo IV: Perfeccionismo (16-20) -->
<div class="question">
  <label>16. Se não posso fazer algo bem é melhor ficar quieto:</label><br>
  <input type="radio" name="q16" value="-2"> Totalmente de acordo<br>
  <input type="radio" name="q16" value="-1"> Moderadamente de acordo<br>
  <input type="radio" name="q16" value="0"> Dúvidas<br>
  <input type="radio" name="q16" value="1"> Moderadamente em desacordo<br>
  <input type="radio" name="q16" value="2"> Totalmente em desacordo<br>
</div>
<div class="question">
  <label>17. É vergonhoso mostrar as fraquezas pessoais:</label><br>
  <input type="radio" name="q17" value="-2"> Totalmente de acordo<br>
  <input type="radio" name="q17" value="-1"> Moderadamente de acordo<br>
  <input type="radio" name="q17" value="0"> Dúvidas<br>
  <input type="radio" name="q17" value="1"> Moderadamente em desacordo<br>
  <input type="radio" name="q17" value="2"> Totalmente em desacordo<br>
</div>
<div class="question">
  <label>18. Qualquer pessoa deveria tentar ser a melhor em tudo:</label><br>
  <input type="radio" name="q18" value="-2"> Totalmente de acordo<br>
  <input type="radio" name="q18" value="-1"> Moderadamente de acordo<br>
  <input type="radio" name="q18" value="0"> Dúvidas<br>
  <input type="radio" name="q18" value="1"> Moderadamente em desacordo<br>
  <input type="radio" name="q18" value="2"> Totalmente em desacordo<br>
</div>
<div class="question">
  <label>19. Se cometo um erro, devo sentir-me incomodado:</label><br>
  <input type="radio" name="q19" value="-2"> Totalmente de acordo<br>
  <input type="radio" name="q19" value="-1"> Moderadamente de acordo<br>
  <input type="radio" name="q19" value="0"> Dúvidas<br>
  <input type="radio" name="q19" value="1"> Moderadamente em desacordo<br>
  <input type="radio" name="q19" value="2"> Totalmente em desacordo<br>
</div>
<div class="question">
  <label>20. Se não tenho grandes metas, é possível que acabe sempre em segundo:</label><br>
  <input type="radio" name="q20" value="-2"> Totalmente de acordo<br>
  <input type="radio" name="q20" value="-1"> Moderadamente de acordo<br>
  <input type="radio" name="q20" value="0"> Dúvidas<br>
  <input type="radio" name="q20" value="1"> Moderadamente em desacordo<br>
  <input type="radio" name="q20" value="2"> Totalmente em desacordo<br>
</div>

    <!-- Grupo V: Direitos sobre Outros (21-25) -->
<div class="question">
  <label>21. Se creio firmemente que mereço algo, tenho razões para esperar poder consegui-lo:</label><br>
  <input type="radio" name="q21" value="-2"> Totalmente de acordo<br>
  <input type="radio" name="q21" value="-1"> Moderadamente de acordo<br>
  <input type="radio" name="q21" value="0"> Dúvidas<br>
  <input type="radio" name="q21" value="1"> Moderadamente em desacordo<br>
  <input type="radio" name="q21" value="2"> Totalmente em desacordo<br>
</div>
<div class="question">
  <label>22. Se encontro obstáculos para conseguir o que desejo, não é estranho que me sinta frustrado:</label><br>
  <input type="radio" name="q22" value="-2"> Totalmente de acordo<br>
  <input type="radio" name="q22" value="-1"> Moderadamente de acordo<br>
  <input type="radio" name="q22" value="0"> Dúvidas<br>
  <input type="radio" name="q22" value="1"> Moderadamente em desacordo<br>
  <input type="radio" name="q22" value="2"> Totalmente em desacordo<br>
</div>
<div class="question">
  <label>23. Se colocar as necessidades dos outros à frente das minhas, eles ajudar-me-ão quando eu precisar:</label><br>
  <input type="radio" name="q23" value="-2"> Totalmente de acordo<br>
  <input type="radio" name="q23" value="-1"> Moderadamente de acordo<br>
  <input type="radio" name="q23" value="0"> Dúvidas<br>
  <input type="radio" name="q23" value="1"> Moderadamente em desacordo<br>
  <input type="radio" name="q23" value="2"> Totalmente em desacordo<br>
</div>
<div class="question">
  <label>24. Se me comporto bem numa relação amorosa, a outra pessoa deve amar-me:</label><br>
  <input type="radio" name="q24" value="-2"> Totalmente de acordo<br>
  <input type="radio" name="q24" value="-1"> Moderadamente de acordo<br>
  <input type="radio" name="q24" value="0"> Dúvidas<br>
  <input type="radio" name="q24" value="1"> Moderadamente em desacordo<br>
  <input type="radio" name="q24" value="2"> Totalmente em desacordo<br>
</div>
<div class="question">
  <label>25. Se fizer coisas boas pelos outros, eles irão respeitar-me e tratar-me tão bem como eu a eles:</label><br>
  <input type="radio" name="q25" value="-2"> Totalmente de acordo<br>
  <input type="radio" name="q25" value="-1"> Moderadamente de acordo<br>
  <input type="radio" name="q25" value="0"> Dúvidas<br>
  <input type="radio" name="q25" value="1"> Moderadamente em desacordo<br>
  <input type="radio" name="q25" value="2"> Totalmente em desacordo<br>
</div>

    <!-- Grupo VI: Onipotência (26-30) -->
<div class="question">
  <label>26. Devo assumir responsabilidades pela forma como as pessoas que me são próximas se comportam e sentem:</label><br>
  <input type="radio" name="q26" value="-2"> Totalmente de acordo<br>
  <input type="radio" name="q26" value="-1"> Moderadamente de acordo<br>
  <input type="radio" name="q26" value="0"> Dúvidas<br>
  <input type="radio" name="q26" value="1"> Moderadamente em desacordo<br>
  <input type="radio" name="q26" value="2"> Totalmente em desacordo<br>
</div>
<div class="question">
  <label>27. Se critico a forma como alguém faz alguma coisa e essa pessoa se aborrece ou entristece, é porque a decepcionei:</label><br>
  <input type="radio" name="q27" value="-2"> Totalmente de acordo<br>
  <input type="radio" name="q27" value="-1"> Moderadamente de acordo<br>
  <input type="radio" name="q27" value="0"> Dúvidas<br>
  <input type="radio" name="q27" value="1"> Moderadamente em desacordo<br>
  <input type="radio" name="q27" value="2"> Totalmente em desacordo<br>
</div>
<div class="question">
  <label>28. Para ser uma pessoa boa, útil e com moral, devo tratar de ajudar qualquer pessoa que precise:</label><br>
  <input type="radio" name="q28" value="-2"> Totalmente de acordo<br>
  <input type="radio" name="q28" value="-1"> Moderadamente de acordo<br>
  <input type="radio" name="q28" value="0"> Dúvidas<br>
  <input type="radio" name="q28" value="1"> Moderadamente em desacordo<br>
  <input type="radio" name="q28" value="2"> Totalmente em desacordo<br>
</div>
<div class="question">
  <label>29. Se uma criança tem dificuldades emocionais ou de comportamento, significa que os pais falharam em algo importante:</label><br>
  <input type="radio" name="q29" value="-2"> Totalmente de acordo<br>
  <input type="radio" name="q29" value="-1"> Moderadamente de acordo<br>
  <input type="radio" name="q29" value="0"> Dúvidas<br>
  <input type="radio" name="q29" value="1"> Moderadamente em desacordo<br>
  <input type="radio" name="q29" value="2"> Totalmente em desacordo<br>
</div>
<div class="question">
  <label>30. Devo ser capaz de agradar a toda a gente:</label><br>
  <input type="radio" name="q30" value="-2"> Totalmente de acordo<br>
  <input type="radio" name="q30" value="-1"> Moderadamente de acordo<br>
  <input type="radio" name="q30" value="0"> Dúvidas<br>
  <input type="radio" name="q30" value="1"> Moderadamente em desacordo<br>
  <input type="radio" name="q30" value="2"> Totalmente em desacordo<br>
</div>


<!-- Grupo VII: Autonomia (31-35) -->
<div class="question">
  <label>31. Acho que não consigo controlar os meus sentimentos quando me acontece algo mau:</label><br>
  <input type="radio" name="q31" value="-2"> Totalmente de acordo<br>
  <input type="radio" name="q31" value="-1"> Moderadamente de acordo<br>
  <input type="radio" name="q31" value="0"> Dúvidas<br>
  <input type="radio" name="q31" value="1"> Moderadamente em desacordo<br>
  <input type="radio" name="q31" value="2"> Totalmente em desacordo<br>
</div>
<div class="question">
  <label>32. Não faz sentido tentar mudar as emoções desagradáveis, pois são uma parte válida e inevitável da vida diária:</label><br>
  <input type="radio" name="q32" value="-2"> Totalmente de acordo<br>
  <input type="radio" name="q32" value="-1"> Moderadamente de acordo<br>
  <input type="radio" name="q32" value="0"> Dúvidas<br>
  <input type="radio" name="q32" value="1"> Moderadamente em desacordo<br>
  <input type="radio" name="q32" value="2"> Totalmente em desacordo<br>
</div>
<div class="question">
  <label>33. O meu estado de espírito deve-se a fatores que estão fora do meu controlo, como o passado, o destino, as hormonas, etc.:</label><br>
  <input type="radio" name="q33" value="-2"> Totalmente de acordo<br>
  <input type="radio" name="q33" value="-1"> Moderadamente de acordo<br>
  <input type="radio" name="q33" value="0"> Dúvidas<br>
  <input type="radio" name="q33" value="1"> Moderadamente em desacordo<br>
  <input type="radio" name="q33" value="2"> Totalmente em desacordo<br>
</div>
<div class="question">
  <label>34. A minha felicidade depende do que me acontece:</label><br>
  <input type="radio" name="q34" value="-2"> Totalmente de acordo<br>
  <input type="radio" name="q34" value="-1"> Moderadamente de acordo<br>
  <input type="radio" name="q34" value="0"> Dúvidas<br>
  <input type="radio" name="q34" value="1"> Moderadamente em desacordo<br>
  <input type="radio" name="q34" value="2"> Totalmente em desacordo<br>
</div>
<div class="question">
  <label>35. As pessoas com a marca do sucesso (fama, riqueza, boa aparência) têm mais probabilidade de serem felizes do que as que não a têm:</label><br>
  <input type="radio" name="q35" value="-2"> Totalmente de acordo<br>
  <input type="radio" name="q35" value="-1"> Moderadamente de acordo<br>
  <input type="radio" name="q35" value="0"> Dúvidas<br>
  <input type="radio" name="q35" value="1"> Moderadamente em desacordo<br>
  <input type="radio" name="q35" value="2"> Totalmente em desacordo<br>
</div>


    <!-- Botão de Submissão -->
    <button type="button" onclick="calculateScore()">Calcular Pontuação</button>
  </form>
  
  <!-- Div para Mostrar Resultado -->
  <div id="result" class="result"></div>

  <div id="feedback" style="display: none; color: green; font-weight: bold;"></div>

  <!-- Div para exibir o gráfico -->
<div id="chart-container" style="width: 80%; margin: auto; max-width: 600px; display: none;">
  <canvas id="scoreChart"></canvas>
</div>

<script>
function calculateScore() {
  const form = document.getElementById('questionnaire');
  const totalQuestions = 35;
  const scores = { approval: 0, love: 0, achievement: 0, perfectionism: 0, rights: 0, omnipotence: 0, autonomy: 0 };
  const answers = {};

  // Ensure the name field is filled
  const name = form['name'].value.trim();
  if (!name) {
    alert("Por favor, insira o seu nome.");
    return;
  }
  answers['Nome'] = name;

  // Accumulate scores
  for (let i = 1; i <= totalQuestions; i++) {
    const answer = form[`q${i}`].value;
    if (answer) {
      answers[`Q${i}`] = answer;
      const value = parseInt(answer, 10);
      if (i <= 5) scores.approval += value;
      else if (i <= 10) scores.love += value;
      else if (i <= 15) scores.achievement += value;
      else if (i <= 20) scores.perfectionism += value;
      else if (i <= 25) scores.rights += value;
      else if (i <= 30) scores.omnipotence += value;
      else scores.autonomy += value;
    } else {
      alert(`Por favor, responda à pergunta ${i}`);
      return;
    }
  }

  // Display text results
  document.getElementById('result').innerHTML = `
    <p>Pontuação de Grupo I: ${scores.approval}</p>
    <p>Pontuação de Grupo II: ${scores.love}</p>
    <p>Pontuação de Grupo III: ${scores.achievement}</p>
    <p>Pontuação de Grupo IV: ${scores.perfectionism}</p>
    <p>Pontuação de Grupo V: ${scores.rights}</p>
    <p>Pontuação de Grupo VI: ${scores.omnipotence}</p>
    <p>Pontuação de Grupo VII: ${scores.autonomy}</p>
  `;

  // Add scores to answers object for submission
  answers['Grupo I'] = scores.approval;
  answers['Grupo II'] = scores.love;
  answers['Grupo III'] = scores.achievement;
  answers['Grupo IV'] = scores.perfectionism;
  answers['Grupo V'] = scores.rights;
  answers['Grupo VI'] = scores.omnipotence;
  answers['Grupo VII'] = scores.autonomy;

  // Submit answers and scores to Google Sheets
  submitToGoogleSheet(answers);
  
  // Generate the bar chart
  generateChart(scores);

  // Scroll to the chart
  document.getElementById('chart-container').scrollIntoView({ behavior: 'smooth' });
}

function generateChart(scores) {
  // Show the chart container
  document.getElementById('chart-container').style.display = 'block';

  // Chart Data
  const ctx = document.getElementById('scoreChart').getContext('2d');
  const data = {
    labels: ['Grupo I', 'Grupo II', 'Grupo III', 'Grupo IV', 'Grupo V', 'Grupo VI', 'Grupo VII'],
    datasets: [{
      label: 'Pontuação por Grupo',
      data: [
        scores.approval,
        scores.love,
        scores.achievement,
        scores.perfectionism,
        scores.rights,
        scores.omnipotence,
        scores.autonomy,
      ],
      backgroundColor: 'rgba(75, 192, 192, 0.5)',
      borderColor: 'rgba(75, 192, 192, 1)',
      borderWidth: 1,
    }]
  };

  const config = {
    type: 'bar',
    data: data,
    options: {
      scales: {
        y: {
          beginAtZero: true,
          title: {
            display: true,
            text: 'Pontuação',
          }
        },
        x: {
          title: {
            display: true,
            text: 'Grupo'
          }
        }
      }
    }
  };

  // Render the chart
  new Chart(ctx, config);
}

function submitToGoogleSheet(answers) {
  const url = "https://script.google.com/macros/s/AKfycbw1wNEyNULHoFg8hrAbwfDj4_QnkK3q_TunCP5KD5KRKh3wIcHglqiIILQLdnx7sif8LA/exec";
  console.log("Submitting data to Google Sheets:", answers);

  // Display area for feedback messages
  const feedbackDiv = document.getElementById('feedback');
  feedbackDiv.style.display = "block";
  feedbackDiv.innerHTML = "Submitting data...";

  // Send the answers object as JSON
  fetch(url, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(answers),
  })
  .then(response => {
    // Check if the response is OK (status code 200)
    if (response.ok) {
      feedbackDiv.innerHTML = "Data submitted successfully! Status code: " + response.status;
      return response.json();
    } else {
      feedbackDiv.innerHTML = "Submission failed! Status code: " + response.status;
      throw new Error("Server returned status code: " + response.status);
    }
  })
  .then(data => console.log("Data saved successfully:", data))
  .catch(error => {
    feedbackDiv.innerHTML = "An error occurred during submission. " + error.message;
    console.error("Error saving data:", error);
  });
}
</script>
</body>
</html>
